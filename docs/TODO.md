# 诺曼底登陆 - 长期演进 TODO / Backlog

> 本文档定义项目的功能扩展方向和优先级，用于指导未来开发决策。

---

## 📊 项目现状评估

### 当前阶段
**可玩原型（Playable Prototype）** - 核心玩法完整，但缺乏打磨和体验增强

### 已实现的核心功能
- ✅ 完整塔防玩法循环（放置→战斗→结算）
- ✅ 6种防御塔（渐进解锁）
- ✅ 4种敌人类型
- ✅ 全局升级系统（最高3级）
- ✅ Combo连击系统
- ✅ 交战系统（塔有HP，敌人可攻击塔）
- ✅ 两种游戏模式（经典10波/无尽）
- ✅ 暂停/速度控制
- ✅ 完整的UI交互

### 明显缺失的体验层面
- ❌ **听觉反馈** - 完全没有音效
- ❌ **视觉反馈** - 缺少命中特效、死亡动画、屏幕抖动
- ❌ **UI反馈** - 缺少数值跳字、升级动画、波次过场
- ❌ **新手引导** - 没有教程或提示
- ❌ **系统完善** - 没有设置菜单、存档功能
- ❌ **内容深度** - 防御塔/敌人数量适中，但可以扩展

---

## 🎯 功能方向分类

### 1️⃣ 体验增强（Sensory Enhancement）
提升游戏的"感觉"，让玩起来更爽、更沉浸

**优先级**：中高（这些是"让原型像成品"的关键）

### 2️⃣ 表现与反馈（Presentation & Feedback）
强化玩家操作的即时反馈和信息传达

**优先级**：中（锦上添花，但显著提升品质感）

### 3️⃣ 玩法扩展（Gameplay Expansion）
增加游戏深度和重玩价值

**优先级**：低（当前内容已足够支撑完整游戏体验）

### 4️⃣ 系统层（System Features）
完善游戏周边功能

**优先级**：中低（影响用户体验，但不影响核心玩法）

### 5️⃣ 工程质量（Engineering Quality）
代码维护性和开发效率

**优先级**：低（当前代码质量可接受）

---

## 📋 TODO Backlog

### 1️⃣ 体验增强

#### 🔊 音效系统 [⭐ 迟早要有的]
**能提升的体验**：让战斗有"打击感"，增加沉浸度

**内容**：
- 射击音效（每类塔不同音色）
- 命中音效（子弹击中敌人）
- 死亡音效（敌人被消灭）
- 放置/升级音效（UI反馈）
- 背景音乐（可选，静音按钮）

| 实现成本 | 风险 |
|----------|------|
| 中 | 低（可使用免费音效资源） |

**建议实现方式**：
- 使用 Web Audio API 或简单的 `<audio>` 标签
- 可从 Freesound.org 等免费资源获取

---

#### ✨ 粒子特效系统 [⭐ 迟早要有的]
**能提升的体验**：让战斗画面更生动，命中反馈更明显

**内容**：
- 命中粒子（子弹击中时的小爆炸）
- 死亡粒子（敌人被消灭时的大爆炸）
- 放置特效（防御塔落地时的波纹）
- 升级特效（升级时的光效）

| 实现成本 | 风险 |
|----------|------|
| 中 | 中（需要平衡性能） |

**建议实现方式**：
- 简单的 Canvas 粒子系统（10-30个粒子/次）
- 粒子类型：圆形渐变、线条、碎片

---

#### 📺 屏幕震动 [锦上添花]
**能提升的体验**：强化大爆炸/重要事件的冲击力

**触发场景**：
- 敌人突破防线
- 大型敌人（坦克/火箭塔）被消灭
- 使用技能（如果有）

| 实现成本 | 风险 |
|----------|------|
| 低 | 低（简单的 CSS 或 Canvas 偏移） |

---

### 2️⃣ 表现与反馈

#### 💰 数值跳字 [⭐ 迟早要有的]
**能提升的体验**：让玩家清楚看到自己的收益

**内容**：
- 击杀金币数字飘起
- Combo倍率提示
- 升级成功提示

| 实现成本 | 风险 |
|----------|------|
| 低 | 低 |

**建议实现方式**：
- Canvas 文本 + Y轴动画
- 1-2秒后淡出消失

---

#### 🎬 波次过场动画 [锦上添花]
**能提升的体验**：给玩家喘息时间，强化节奏感

**内容**：
- "第X波开始"的文字动画
- 波次完成的大提示
- Boss/特殊敌人登场提示

| 实现成本 | 风险 |
|----------|------|
| 中 | 低 |

---

#### 🔄 UI 动画 [锦上添花]
**能提升的体验**：让界面更精致、响应更灵敏

**内容**：
- 按钮悬停/点击动画
- 金币变化时数字滚动
- 血条/经验条平滑过渡

| 实现成本 | 风险 |
|----------|------|
| 中 | 低（CSS transition 即可） |

---

### 3️⃣ 玩法扩展

#### 🗼 新防御塔类型 [锦上添花]
**能提升的体验**：增加策略多样性

**建议方向**（当前6种已足够，这些是可选扩展）：
- **火焰塔**：范围持续伤害
- **冰霜塔**：减速效果
- **辅助塔**：提升周围塔的射速/伤害
- **陷阱**：放置在地面上，敌人触发后生效

| 实现成本 | 风险 |
|----------|------|
| 中 | 中（需要平衡数值） |

**建议时机**：当前6种塔已足够，建议在打磨完体验后再考虑

---

#### 👹 新敌人类型 [锦上添花]
**能提升的体验**：增加战斗变化，避免单调

**建议方向**：
- **治疗兵**：治疗周围敌人
- **盾兵**：高防御，需要多次击中
- **Boss**：每5波一只巨型敌人

| 实现成本 | 风险 |
|----------|------|
| 中 | 中（需要AI和平衡） |

---

#### ⏱️ 特殊事件/挑战 [锦上添花]
**能提升的体验**：打破单调的刷怪节奏

**建议方向**：
- 空袭：一波从天而降的敌人
- 护盾波：敌人有护盾，需要打破
- 狂暴波：敌人速度翻倍

| 实现成本 | 风险 |
|----------|------|
| 高 | 高（需要测试平衡） |

---

### 4️⃣ 系统层

#### 💾 本地存档 [⭐ 迟早要有的]
**能提升的体验**：让玩家可以中断后继续，不需要一次性通关

**内容**：
- 自动存档（每波结束）
- 手动存档（暂停菜单）
- 存档槽位（3个）
- 显示"最高波次"

| 实现成本 | 风险 |
|----------|------|
| 中 | 低（localStorage 即可） |

**建议实现方式**：
- `localStorage.setItem('dday_save', JSON.stringify(saveData))`
- 存储内容：波次、金币、塔位置、塔等级等

---

#### ⚙️ 设置菜单 [⭐ 迟早要有的]
**能提升的体验**：让玩家自定义游戏体验

**内容**：
- 音量控制（音效/音乐）
- 画质设置（粒子开关）
- 快捷键设置
- 语言（如果做多语言）

| 实现成本 | 风险 |
|----------|------|
| 中 | 低 |

---

#### 📚 新手引导/教程 [锦上添花]
**能提升的体验**：降低新手学习曲线

**内容**：
- 首次进入游戏时的图文教程
- 第一波的文字提示（"放置防御塔"）
- 悬停提示（鼠标悬停在塔上显示说明）

| 实现成本 | 风险 |
|----------|------|
| 中 | 低（可跳过） |

---

#### 🏆 成就系统 [锦上添花]
**能提升的体验**：给玩家额外目标，增加重玩价值

**建议成就**：
- "首次通关"：完成经典模式
- "塔防大师"：不损失生命通关
- "无尽挑战"：无尽模式达到20波
- "Combo高手"：单次Combo达到10连杀

| 实现成本 | 风险 |
|----------|------|
| 中 | 低 |

---

### 5️⃣ 工程质量

#### 📦 构建脚本 [可选]
**能提升的体验**：简化部署流程

**内容**：
- 压缩JS/CSS
- 合并文件
- 生成版本号

| 实现成本 | 风险 |
|----------|------|
| 中 | 中（可能引入新问题） |

**建议**：当前项目足够简单，暂不需要

---

#### 🧪 扩展自动化测试 [可选]
**能提升的体验**：保证修改不破坏现有功能

**内容**：
- 覆盖更多场景的测试用例
- 性能测试（帧率监控）
- 跨浏览器测试

| 实现成本 | 风险 |
|----------|------|
| 高 | 低 |

**建议**：当前已有基础测试，可在添加新功能时同步扩展

---

#### 📝 代码重构 [可选]
**能提升的体验**：提升代码可维护性

**当前状态**：代码结构已清晰，暂不需要大规模重构

**可考虑的小优化**：
- 提取常量
- 统一命名风格
- 补充注释

| 实现成本 | 风险 |
|----------|------|
| 中 | 高（可能引入新bug） |

**建议**：只在添加新功能时顺手优化，不要专门做

---

## 🗺️ 路线图建议

### 阶段 1：打磨体验（优先级：高）
**目标**：让游戏从"可玩原型"变成"有质感的游戏"

**预计时间**：1-2周

**内容**：
1. 音效系统（射击、命中、死亡、UI）
2. 粒子特效（命中、死亡）
3. 数值跳字（金币、Combo）
4. UI动画（按钮、过渡）

**验收标准**：
- 玩游戏时能感受到"爽感"
- 每次操作都有明确反馈
- 不再觉得"干巴巴"

---

### 阶段 2：完善系统（优先级：中）
**目标**：让游戏功能完整，接近"可发布"状态

**预计时间**：1-2周

**内容**：
1. 本地存档
2. 设置菜单
3. 新手引导
4. 波次过场动画

**验收标准**：
- 可以中断游戏后继续
- 新玩家能无障碍上手
- 游戏有完整的"开始→游玩→退出"流程

---

### 阶段 3：扩展玩法（优先级：低）
**目标**：增加游戏深度和重玩价值

**预计时间**：2-3周

**内容**：
1. 新防御塔类型（2-3种）
2. 新敌人类型（1-2种）
3. 特殊事件/挑战
4. 成就系统

**验收标准**：
- 玩家有多套策略可选
- 无尽模式能玩30+波
- 有额外的长期目标

---

## 🎯 优先级总结

### 如果只能做3件事（MVP+ 版本）
1. **音效系统** - 立竿见影提升体验
2. **粒子特效** - 让战斗有视觉冲击
3. **数值跳字** - 让反馈更清晰

### 如果只能做5件事（完整版）
1. 音效系统
2. 粒子特效
3. 数值跳字
4. 本地存档
5. 新手引导

### 如果有充足时间
按照阶段 1 → 2 → 3 的顺序推进

---

## ⚠️ 不建议做的功能

以下功能**超出项目定位**，不建议实现：

- ❌ 多人联机/排行榜（需要后端）
- ❌ 关卡编辑器（过于复杂）
- ❌ 剧情/对话系统（不是此类游戏重点）
- ❌ 多语言支持（工作量太大）
- ❌ 移动端适配（项目定位为桌面）
- ❌ 内购/付费系统（GPL协议）

---

## 📝 决策原则

在决定是否实现某个功能时，问自己：

1. **它是否显著提升核心玩法体验？**
   - 是 → 高优先级
   - 否 → 低优先级

2. **它是否违背"轻量网页游戏"定位？**
   - 是 → 不做
   - 否 → 考虑

3. **它的实现成本是否超过预期收益？**
   - 是 → 不做或延后
   - 否 → 可以做

4. **它是否会导致代码复杂度大幅提升？**
   - 是 → 慎重考虑
   - 否 → 可以做

---

**文档版本**: v1.0
**更新日期**: 2026-01-28
**维护者**: 项目团队
